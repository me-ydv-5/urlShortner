<!DOCTYPE html>
<html>
<head>
	<title>URL Shortner</title>
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <!-- <link href="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js" rel="stylesheet"> -->
      <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
      <link rel="stylesheet" href="css/main.css">
      <link rel="shortcut icon" type="image/png" href="/images/favicon.png"/>
</head>
<!-- <script src="http://localhost:3000/socket.io/socket.io.js"></script> -->
<script type="text/javascript">
	// var socket = io.connect('http://localhost:3000');
</script>
<body style="background-color: #b3e5fc;">

	<div class="left_side">
		<font size="+40" style="position: absolute; margin-top: 187px; margin-left: 2%">
			goo.gl got shut down but we're still up! We ain't going gloomy anytime sooner.
		</font>
	</div>	
	<div class="right_side">
    	<form id="form" action="javascript:submitURL();">
	    	<div class="row">
	    	  	<div class="input-field col s12" style="width: 520px;">
	    	    	<input id="url" type="text">
	    	    	<label for="url">Enter long URL</label>
	    	  	</div>
	    	</div>

	    	<div style="padding-top: 20px; color: #000000;">
				<button class="btn waves-effect waves-light" type="submit" style="width: 130px; color: black" id="button" onclick="submitURL()">
				Shorten it!
				</button>
				<script type="text/javascript">
					function submitURL() {
						argument = document.getElementById('url').value
						console.log("argumentsent " + argument)
						var init = {
							method: 'POST',
							headers: {
								'Content-Type': "application/json"
							},
							body: JSON.stringify({'url': argument})
						}

						fetch('/generate-short-url', init)
						  	.then(data => console.log(JSON.stringify(data)))
						  	.catch(error => console.error(error));
					}

				</script>
			</div>

    	</form>
	        
		<div class="vertical-menu" id="style-1">
			<script>
			  	function updateTable() {
					fetch('/list', {method: 'GET'})
					  	.then(incomingData => {
					  		console.log("incomingData is " + incomingData)
					  		var table = document.getElementById("table");
					  		// var row = table.insertRow(0);
					  	})
					  	.catch(error => console.error(error));

			  	}

			</script>
	      	<table class="centered responsive-table" id="table">
	        	<thead id="thead">
	          		<tr>
	              		<th>Shortened URL</th>
	              		<th>Hit Rate</th>
	          		</tr>
	        	</thead>
	        	<tbody>
	          		<tr>
	              		<td>Alice</td>
	              		<td>1</td>
	          		</tr>
	          		<tr>
	              		<td>Alice</td>
	              		<td>1</td>
	          		</tr>
	          		<tr>
	              		<td>Alice</td>
	              		<td>1</td>
	          		</tr>
	          		<tr>
	              		<td>Alice</td>
	              		<td>1</td>
	          		</tr>
	          		<tr>
	              		<td>Alice</td>
	              		<td>1</td>
	          		</tr>
	          		<tr>
	              		<td>Alice</td>
	              		<td>1</td>
	          		</tr>

	        	<!-- body of the table -->
	        	</tbody>
	      	</table>
	  	</div>	
	</div>

<script type="text/javascript" src="js/materialize.min.js"></script>
</body>
</html>